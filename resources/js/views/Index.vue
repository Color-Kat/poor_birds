<template>
    <div>
        <!--    Hello page   -->
        <b-card
            v-if="!getAuth"
            title="–ë–µ–¥–Ω—ã–µ –ø—Ç–∏—á–∫–∏üò≠"
            class="mb-2 text-center"
        >

            <b-card-text class="text-left">
                –ë–µ–¥–Ω—ã–µ –ø—Ç–∏—á–∫–∏ - —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Å —Å–æ—Ç–∫–æ–π –≤ —Ä—É–∫–∞—Ö —Ä–µ—à–∞–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ç–∏—Ü–µ—Ñ–µ—Ä–º—É! –ß—Ç–æ–±—ã –∫—É–ø–∏—Ç—å –ø—Ç–∏—Ü
                –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ (–±–∞–∑–∞—Ä, –º–∞–≥–∞–∑–∏–Ω, —á–∞—Å—Ç–Ω–∏–∫ –¥—è–¥—è –ö–æ–ª—è –∏ –¥—Ä.) –∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–µ—Ç–µ —É –Ω–∏—Ö
                –ø—Ç–∏—Ü; –æ–Ω–∏ –Ω–µ—Å—É—Ç –≤–∞–º —è–π—Ü–∞, –ø—Ä–æ–¥–∞–≤–∞—è –∫–æ—Ç–æ—Ä—ã–µ, –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–∏–±—ã–ª—å; –ø–æ–∫—É–ø–∞—Ç—å –Ω–æ–≤—ã—Ö –ø—Ç–∏—Ü; –∏ –ø–æ–ª—É—á–∞—Ç—å
                –ø—Ä–∏–±—ã–ª—å –µ—â–µ –±–æ–ª—å—à–µ!
                –ù–æ –ø—Ç–∏—Ü—ã —Ç–æ–∂–µ –Ω–µ –ø–∞–ª—å—Ü–µ–º –¥–µ–ª–∞–Ω–Ω—ã–µ ü§™ –ß—Ç–æ–±—ã –æ–Ω–∏ —Ö–æ—Ä–æ—à–æ –ø–ª–æ–¥–æ–Ω–æ—Å–∏–ª–∏, –ø—Ä–∏–¥–µ—Ç—Å—è –∑–∞ –Ω–∏–º–∏ —É—Ö–∞–∂–∏–≤–∞—Ç—å:
                —É–±–∏—Ä–∞—Ç—å –ø–æ–º–µ—ÇüòÖ –∏ –ø—Ä–æ—Å—Ç–æ –≥–ª–∞–¥–∏—Ç—å, —á—Ç–æ–±—ã –æ–Ω–∏ –ª—É—á—à–µ –Ω–µ—Å–ª–∏—Å—å

                <hr>
                –î–∞–Ω–Ω–∞—è –∏–≥—Ä–∞ –µ—â–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —Ç–∞–∫ —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω—ã –±–∞–≥–∏, –æ–±–Ω—É–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
                –í –∏–≥—Ä—É –≤—Å–µ –µ—â–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.
                –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:
                <ul>
                    <li>–ü—Ä–æ–¥–∞–∂–∞ —è–∏—Ü —Ä–∞–∑–Ω—ã–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å –∫ —Å–ø—Ä–æ—Å—É)</li>
                    <li>–ú–∏–Ω–∏-–±–ª–æ–≥ –Ω–æ–≤–æ—Å—Ç–µ–π</li>
                    <li>–î–æ–Ω–∞—Ç –∞ –∏–≥—Ä–µ</li>
                </ul>
            </b-card-text>
            <hr>
            <b-button class="text-center" :to="{name: 'birds'}" variant="primary">–ö—É–ø–∏—Ç—å –ø—Ç–∞—à–∫—É!</b-button>
        </b-card>
        <!--    Hello page   -->

        <b-card
            v-else
            title="–ë–µ–¥–Ω—ã–µ –ø—Ç–∏—á–∫–∏üò≠"
            class="mb-2 text-center"
        >

            <b-card-text class="text-left">
                <div class="d-flex justify-content-around actions">
                    <b-button class="text-center" :to="{name: 'eggs'}" variant="success">ü•ö</b-button>
                    <b-button class="text-center" :to="{name: 'my_birds'}" variant="warning">ü¶Ö</b-button>
                    <b-button class="text-center" :to="{name: 'sellers'}" variant="primary">üõí</b-button>
                </div>
                <hr>
                <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h4>
                <h5>
                    <b-badge variant="danger">–ù–∞–ª–æ–≥–∏: {{ getFines }}‚ÇΩ</b-badge>
                    <b-badge variant="success">–í—Å–µ–≥–æ —è–∏—Ü: {{ getEggsCount }} —à—Ç</b-badge>
                    <b-badge variant="primary">–Ø —è–∏—Ü –Ω–∞ —Å—É–º–º—É: {{ getEggsTotalPrice }}‚ÇΩ</b-badge>
                    <hr>
<!--                    <b-badge variant="danger">–ù–∞–ª–æ–≥–∏: {{ getFines }}‚ÇΩ</b-badge>-->
<!--                    <b-badge variant="success">–í—Å–µ–≥–æ —è–∏—Ü: {{ getEggsCount }} —à—Ç</b-badge>-->
                    <b-badge variant="primary">
                        –°–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è –ø—Ç–∏—Ü–∞: {{ getMostExpensiveBird.name }} -
                        {{getMostExpensiveBird.price}}‚ÇΩ
                    </b-badge>
                    <br>
                    <b-badge variant="success">
                        –°–∞–º–∞—è –ø–ª–æ–¥–æ–Ω–æ—Å–Ω–∞—è –ø—Ç–∏—Ü–∞: {{ getMostFertileBird.name }} -
                        {{getMostFertileBird.fertility}} —è–∏—Ü/—á–∞—Å
                    </b-badge>
                    <br>
                    <b-badge variant="danger">
                        –°–∞–º–∞—è –¥–µ—à–µ–≤–∞—è –ø—Ç–∏—Ü–∞: {{ getCheapestBird.name }} -
                        {{getCheapestBird.price}}‚ÇΩ
                    </b-badge>
                    <br>
                    <b-badge variant="dark">
                        –°–∞–º–∞—è –∫–∞–∫–∞—é—â–∞—è –ø—Ç–∏—Ü–∞: {{ getPoopingBird.name }} -
                        {{getPoopingBird.litter}} –µ–¥.–ø–æ–º—ë—Ç–∞/—á–∞—Å
                    </b-badge>
                </h5>
            </b-card-text>


        </b-card>

        <!--    NEWS    -->
        <b-card>
            <h3>–ù–æ–≤–æ—Å—Ç–∏</h3>
            <b-card class="p-1 mb-2">
                –î–æ–±–∞–≤–ª–µ–Ω–∞ —à–∞—Ö—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–Ω–µ–≥.
                –ù–∞—á–∞—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–∞–Ω–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∫—É–ø–∏—Ç—å –ì—É—Å—Ç–∏–Ω–∏–∞–Ω—ã (–≤–∞–ª—é—Ç–∞ –∏–≥—Ä—ã) –∑–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –¥–ª—è
                –ø–æ–∫—É–ø–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö –ø—Ç–∏—Ü, –ª–æ–ø–∞—Ç, –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ –±—Ä–∏–≥–∞–¥—ã.
            </b-card>
            <b-card class="p-1 mb-2">
                –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª - –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã. –¢–∞–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –ª—é–¥–µ–π, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å.
                –ü–æ–∫–∞ –≤ –∏–≥—Ä–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–≥–æ 3 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ù–æ —ç—Ç–æ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ;)
            </b-card>
            <b-card class="p-1 mb-2">
                –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—Ç–∏—Ü—ã:
                <ul>
                    <li>–ì—É—Å—å</li>
                    <li>–£—Ç–∫–∞</li>
                    <li>–ò–Ω–¥—é–∫</li>
                    <li>–ü–µ—Ç—É—Ö</li>
                    <li>–ì–µ–Ω–Ω–æ–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ç—É—Ö</li>
                    <li>–ü–µ—Ç—É—Ö-—Ç—Ä–∞–Ω—Å–≥–µ–Ω–¥–µ—Ä</li>
                    <li>–∏ –¥—Ä—É–≥–∏–µ</li>
                </ul>
            </b-card>
            <b-card class="p-1 mb-2">
                –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            </b-card>
        </b-card>
        <!--    NEWS    -->
    </div>
</template>

<script>
import {mapGetters} from "vuex";

export default {
    name    : "Index",
    computed: {
        ...mapGetters(['getAuth', 'getUserData', 'getMyBirds', 'getEggs']),
        /**
         * @returns - count fines for all eggs
         */
        getFines() {
            let fines = 0;
            this.getEggs.forEach(elem => {
                fines += +elem.fine;
            });

            return fines;
        },
        /**
         * @returns - counting all eggs
         */
        getEggsCount() {
            let count = 0;
            this.getEggs.forEach(elem => {
                count += +elem.count;
            });

            return Math.round(count);
        },
        /**
         * @returns - counting all eggs price
         */
        getEggsTotalPrice() {
            let price = 0;
            this.getEggs.forEach(elem => {
                price += +elem.price * +elem.count;
            });

            return Math.round(price);
        },
        /**
         * get the most expensive bird
         * @returns price - price of the most expensive bird.
         * @returns name - name of the most expensive bird
         */
        getMostExpensiveBird() {
            let maxPrice = 0;
            let birdName = '';

            this.getMyBirds.forEach(elem => {
                if(+elem.price > maxPrice) {
                    maxPrice = +elem.price;
                    birdName = elem.name
                }
            });

            return {
                price: Math.round(maxPrice),
                name: birdName
            };
        },
        /**
         * get the cheapest bird
         * @returns {{price, name}} - price of cheapest bird, name of cheapest bird
         */
        getCheapestBird() {
            let minPrice = Infinity;
            let birdName = '';

            this.getMyBirds.forEach(elem => {
                if(+elem.price < minPrice) {
                    minPrice = +elem.price;
                    birdName = elem.name
                }
            });

            return {
                price: Math.round(minPrice),
                name: birdName
            };
        },
        /**
         * get the most fertile bird
         * @returns {{fertility, name}}
         */
        getMostFertileBird() {
            let maxFertility = 0;
            let birdName = '';

            this.getMyBirds.forEach(elem => {
                if(+elem.fertility > maxFertility) {
                    maxFertility = +elem.fertility;
                    birdName = elem.name
                }
            });

            return {
                fertility: Math.round(maxFertility),
                name: birdName
            };
        },
        /**
         * get the most pooping bird
         * @returns {{litter, name}}
         */
        getPoopingBird() {
            let maxLitter = 0;
            let birdName = '';

            this.getMyBirds.forEach(elem => {
                if(+elem.litter > maxLitter) {
                    maxLitter = +elem.litter;
                    birdName = elem.name
                }
            });

            return {
                litter: Math.round(maxLitter),
                name: birdName
            };
        },
    }
}
</script>

<style scoped lang="scss">
.actions {
    * {
        width: 70px;
        height: 70px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
    }
}
</style>
