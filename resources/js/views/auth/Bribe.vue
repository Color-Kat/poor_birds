<template>
    <b-card>
        <h2>üí∞–í–∑—è—Ç–∫–∏</h2>
        <h5>–ü–ª–∞—Ç–∏—Ç–µ –ì—É—Å—Ç–æ–≤—É, —á—Ç–æ–±—ã –≤—ã–∂–∏—Ç—å!</h5>
        <p>
            –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã —Å–ø–∞—Å–ª–∏—Å—å –æ—Ç –ø–æ–≥—Ä–µ–±–µ–Ω–∏—è –∑–∞–∂–∏–≤–æ, –≤—ã —Å—Ç–∞–ª–∏ –±–æ—è—Ç—å—Å—è –∫–∞–∂–¥–æ–≥–æ —à–æ—Ä–æ—Ö–∞.
            –ê –≤—Å—ë –ø–æ—Ç–æ–º—É, —á—Ç–æ –ì—É—Å—Ç–æ–≤ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –≤–∞—Å —Å–Ω–æ–≤–∞ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —É–±–∏—Ç—å.
            –ü–æ—ç—Ç–æ–º—É –≤—ã —Ä–µ—à–∞–µ—Ç–µ –¥–∞—Ç—å –µ–º—É –±–æ–ª—å—à—É—â—É—é –≤–∑—è—Ç–∫—É –≤ —Ä–∞–∑–º–µ—Ä–µ 1.000.000.000 —Ä—É–±–ª–µ–π.
        </p>
        <hr>

        <div class="d-flex justify-content-center flex-wrap">
            <div class="col-sm-6 col-8">

                <img class="w-100" src="http://www.procuror.spb.ru/gif/gustov.jpg" alt="–ì–£–°–¢–û–í">

                <div class="d-flex justify-content-center flex-wrap">
                    <b-button class="w-100" variant="danger" @click="repayLoan">üí∞–û—Ç–¥–∞—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–µ–Ω—å–≥–∏üí∞</b-button>
                    <span class="alert-info p-2 m-2 w-auto text-center">–û—Å—Ç–∞–ª–æ—Å—å: {{getBribe}}‚ÇΩ</span>
                </div>
            </div>
        </div>
    </b-card>
</template>

<script>
import {mapActions, mapGetters, mapMutations} from "vuex";

export default {
    name   : "Bribe",
    data   : function (){
        return {rest: this.getBribe};
    },
    computed: {
        ...mapGetters(['getBribe'])
    },
    methods: {
        ...mapActions(['reduceBribe']),
        ...mapMutations(['showModal']),
        async repayLoan() {
            let res = await this.reduceBribe(); // reduce bribe by user balance

            if(!res) return;

            if (this.getBribe >= 5000000) {
                // sound of damage
                let song    = new Audio( '/assets/sounds/death.mp3');
                song.volume = 0.5;
                song.play();
            } else if (this.getBribe <= 0) {
                // sound of dying
                let song    = new Audio('/assets/sounds/groans.mp3');
                song.volume = 0.5;
                song.play();

                song.onended = () => {
                    this.showModal({
                        title: "–ì—É—Å—Ç–æ–≤ –ø–æ–≤–µ—Ä–∂–µ–Ω!",
                        text: '<p>–í—ã —Å–æ–±—Ä–∞–ª–∏ 1 –º–∏–ª–ª–∏–∞—Ä–¥ —Ä—É–±–ª–µ–π –¥–ª—è –≤–∑—è—Ç–∫–∏ —Å–≤—è—Ç–æ–º –ì—É—Å—Ç–æ–≤—É! 1 –ú–ò–õ–õ–ò–ê–†–î! </p>' +
                            '<p>–í—ã –ø—Ä–∏—à–ª–∏ –≤ –º–µ—Ä–∏—é —Å —Ç—Ä–µ–º—è –º–µ—à–∫–∞–º–∏ –¥–µ–Ω–µ–≥, –∏ —Å—Ä–∞–∑—É –∂–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –ì—É—Å—Ç–æ–≤–∞. ' +
                            '–û–Ω –≤—ã–≥–ª—è–¥–µ–ª –ø–ª–æ—Ö–æ, –æ–Ω –æ–±–ª—ã—Å–µ–ª, –ø–æ—è–≤–∏–ª–∏—Å—å –º–µ—à–∫–∏ –ø–æ–¥ –≥–ª–∞–∑–∞–º–∏. –ù–æ –≤—Å—Ç—Ä–µ—Ç–∏–≤ ' +
                            '–≤–∞—Å, –æ–Ω —É–ª—ã–±–Ω—É–ª—Å—è. –û–Ω —Å—Ä–∞–∑—É –ø–æ–Ω—è–ª, —á—Ç–æ —ç—Ç–æ –¥–µ–Ω—å–≥–∏, –∏ –ø—Ä–∏–≥–ª–∞—Å–∏–ª –≤–∞—Å –Ω–∞ —á–∞—à–µ—á–∫—É –∫–æ—Ñ–µ. ' +
                            '–ö–æ—Ñ–µ –≤—ã –ø–∏—Ç—å –Ω–µ —Å—Ç–∞–ª–∏, —Ç–∞–∫ –∫–∞–∫ –≤–∞—Å —É–∂–µ –ø—ã—Ç–∞–ª–∏—Å—å –∏–º –æ—Ç—Ä–∞–≤–∏—Ç—å, –Ω–æ –≤—ã –ø—Ä–æ—à–ª–∏ —Å –Ω–∏–º. ' +
                            '–ì—É—Å—Ç–æ–≤ —Ä–∞—Å—Å–∫–∞–∑–∞–ª, —á—Ç–æ –±–æ–ª—å—à–µ –Ω–∞ –≤–∞—Å –Ω–µ –æ–±–∏–∂–∞–µ—Ç—Å—è –∏ —á—Ç–æ —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø—Ä–∏–º–µ—Ç –≤–∞—à –ø–æ–¥–∞—Ä–æ–∫. ' +
                            '–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –±—Ä–∞—Ç –ê—Ä–∫–∞–¥–∏—è –ù–∞–∑–∞—Ä—è–Ω–∏–Ω–∞, –ì—Ä–∏–≥–æ—Ä–∏–π –ù–∞–∑–∞—Ä—è–Ω–∏–Ω, –∑–∞–≤–∏–¥–æ–≤–∞–ª –ê—Ä–∫–∞–¥–∏—é. ' +
                            '–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø–ª–∞—Ç–∏–ª–∏ –ê—Ä–∫–∞–¥–∏—é, –æ–Ω —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ–± —ç—Ç–æ–º –ì—Ä–∏—à–µ. –¢–æ—Ç –æ—á–µ–Ω—å —Ä–∞–∑–æ–∑–ª–∏–ª—Å—è –Ω–∞ –≤–∞—Å –æ–±–æ–∏—Ö. ' +
                            '–ò –≤–∑–ª–æ–º–∞–ª –º–æ–µ–≥–æ –æ—Ä–ª–∞!</p> <p> –ë—ã–ª–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –æ–Ω –Ω–µ –≤—Ä–∞–ª. –í—ã –ø—Ä–æ—Å—Ç–∏–ª–∏ –≥—É—Å—Ç–æ–≤–∞.. </p>' +
                            '<p>–ó–∞—Ç–µ–º –≤—ã —Å–ø—Ä–æ—Å–∏–ª–∏, —á—Ç–æ –æ–Ω —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏ - ' +
                            '–æ–Ω —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–µ –ì—É—Å—Ç–∏–Ω–∏–∞–Ω—Å–∫–∏–µ —Ö—Ä–∞–º—ã –≤ –¥—Ä—É–≥–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö, —á—Ç–æ–±—ã –ø—Ä–∏–æ–±—â–∏—Ç—å ' +
                            '–Ω–µ–≤–µ—Ä—É—é—â–∏—Ö –µ—Ä–∏—Ç–µ–∫–æ–≤, –∞ –µ—â–µ –æ—Ç–¥–∞—Ç—å —á–∞—Å—Ç—å –ì—Ä–∏–≥–æ—Ä–∏—é, —á—Ç–æ–±—ã —Å –≤–∞–º–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å</p>' +
                            '<p>–¢–µ–ø–µ—Ä—å –≤—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤–æ–±–æ–¥–Ω—ã –∏ –≤–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ —É–≥—Ä–æ–∂–∞–µ—Ç!</p>' +
                            '<p>–ü–æ—Å–ª–µ —ç—Ç–æ–π –≤—Å—Ç—Ä–µ—á–∏ –ì—É—Å—Ç–æ–≤ —Å—Ç–∞–ª –≤—ã–≥–ª—è–¥–µ—Ç—å –ª—É—á—à–µ, –≤–∏–¥–∏–º–æ –µ–≥–æ –º—É—á–∞–ª ' +
                            '—ç—Ç–æ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç. –í—ã —Å—Ç–∞–ª–∏ —Å –Ω–∏–º —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è, –æ–Ω —Å—Ç–∞–ª –≤–∞—à–∏–º –¥—Ä—É–≥–æ–º!</p>' +
                            '<br><p style="color: orange">–°–ü–ê–°–ò–ë–û –ó–ê –ò–ì–†–£!</p>'
                    });
                }
            } else if (this.getBribe < 5000000) {
                // sound of heart beat
                let song    = new Audio('/assets/sounds/heart_beat.mp3');
                song.volume = 0.5;
                song.play();
            }
        }
    }
}
</script>

<style scoped>

</style>
