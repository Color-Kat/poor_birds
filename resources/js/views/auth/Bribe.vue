<template>
    <b-card>
        <h2>üí∞–í–∑—è—Ç–∫–∏</h2>
        <h5>–ü–ª–∞—Ç–∏—Ç–µ –ì—É—Å—Ç–æ–≤—É, —á—Ç–æ–±—ã –≤—ã–∂–∏—Ç—å!</h5>
        <p>
            –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã —Å–ø–∞—Å–ª–∏—Å—å –æ—Ç –ø–æ–≥—Ä–µ–±–µ–Ω–∏—è –∑–∞–∂–∏–≤–æ, –≤—ã —Å—Ç–∞–ª–∏ –±–æ—è—Ç—å—Å—è –∫–∞–∂–¥–æ–≥–æ —à–æ—Ä–æ—Ö–∞.
            –ê –≤—Å—ë –ø–æ—Ç–æ–º—É, —á—Ç–æ –ì—É—Å—Ç–æ–≤ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –≤–∞—Å —Å–Ω–æ–≤–∞ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —É–±–∏—Ç—å.
            –ü–æ—ç—Ç–æ–º—É –≤—ã —Ä–µ—à–∞–µ—Ç–µ –¥–∞—Ç—å –µ–º—É –±–æ–ª—å—à—É—â—É—é –≤–∑—è—Ç–∫—É –≤ —Ä–∞–∑–º–µ—Ä–µ 1.000.000.000 —Ä—É–±–ª–µ–π.
        </p>
        <hr>

        <div class="d-flex justify-content-center flex-wrap">
            <div class="w-50 ">

                <img class="w-100" src="http://www.procuror.spb.ru/gif/gustov.jpg" alt="–ì–£–°–¢–û–í">

                <div class="d-flex justify-content-center flex-wrap">
                    <b-button class="w-100" variant="danger" @click="repayLoan">üí∞–û—Ç–¥–∞—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–µ–Ω—å–≥–∏üí∞</b-button>
                    <span class="alert-info p-2 m-2 badge-pill">–û—Å—Ç–∞–ª–æ—Å—å: {{rest}}‚ÇΩ</span>
                </div>
            </div>
        </div>
    </b-card>
</template>

<script>
import {mapActions} from "vuex";

export default {
    name   : "Bribe",
    data   : () => ({
        rest: this.bribeRest
    }),
    computed: {
        ...mapActions(['bribeRest'])
    },
    methods: {
        repayLoan() {
            this.rest -= 100000;

            if (this.rest >= 5000000) {
                // sound of damage
                let song    = new Audio( '/assets/sounds/death.mp3');
                song.volume = 0.5;
                song.play();
            } else if (this.rest <= 0) {
                // sound of dying
                let song    = new Audio('/assets/sounds/groans.mp3');
                song.volume = 0.5;
                song.play();

                song.onended = () => {
                    // sound of death
                    let song2 = new Audio('/assets/sounds/death.mp3');
                    song2.volume = 0.5;
                    song2.play();
                }
            } else if (this.rest < 5000000) {
                // sound of heart beat
                let song    = new Audio('/assets/sounds/heart_beat.mp3');
                song.volume = 0.5;
                song.play();
            }
        }
    }
}
</script>

<style scoped>

</style>
